<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/github-light.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Memorystorage by Download</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/Download/memorystorage">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Memorystorage</h1>
            <h2>Memory-backed storage object that implements the Web Storage API</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/Download/memorystorage/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/Download/memorystorage/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h1>
<a id="memorystorage-v0100" class="anchor" href="#memorystorage-v0100" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>memorystorage <sub><sup>v0.10.0</sup></sub>
</h1>

<p>Memory-backed storage that implements the <a href="http://www.w3.org/TR/webstorage/">Web Storage API</a>, making it a drop-in replacement for <code>localStorage</code> and <code>sessionStorage</code> in environments where these are not available. </p>

<h2>
<a id="download" class="anchor" href="#download" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Download</h2>

<ul>
<li>
<a href="https://cdn.rawgit.com/download/memorystorage/0.10.0/dist/memorystorage.umd.js">memorystorage.umd.js</a> (~4kB, commented)</li>
<li>
<a href="https://cdn.rawgit.com/download/memorystorage/0.10.0/dist/memorystorage.min.js">memorystorage.min.js</a> (~2kB, minified)</li>
<li>
<a href="https://cdn.rawgit.com/download/memorystorage/0.10.0/dist/memorystorage.min.js.map">memorystorage.min.js.map</a> (~2kB, debug map file)</li>
</ul>

<h2>
<a id="include-on-your-page" class="anchor" href="#include-on-your-page" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Include on your page</h2>

<p><code>memorystorage</code> can be used directly from CDN, from a local script file, or from a module loader.</p>

<h3>
<a id="cdn" class="anchor" href="#cdn" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CDN</h3>

<p>This is by far the easiest method and gives good performance to boost. Use this if you are in doubt.</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>https://cdn.rawgit.com/download/memorystorage/0.10.0/dist/memorystorage.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<h3>
<a id="local-script-file" class="anchor" href="#local-script-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Local script file</h3>

<p>Download memorystorage.min.js, place it in a folder <code>lib</code> in the root of your website and include it like this:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>lib/memorystorage.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<h3>
<a id="module-loaders" class="anchor" href="#module-loaders" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Module loaders</h3>

<p>Memorystorage implements the Universal Module Pattern and as such, is available to be consumed
from Node modules as well as via an AMD loader such as RequireJS. </p>

<h4>
<a id="node" class="anchor" href="#node" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Node</h4>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> MemoryStorage <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>memorystorage<span class="pl-pds">'</span></span>);
<span class="pl-c">// here, the MemoryStorage function is available</span>
<span class="pl-k">var</span> myStorage <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MemoryStorage</span>(<span class="pl-s"><span class="pl-pds">'</span>my-app<span class="pl-pds">'</span></span>);</pre></div>

<h4>
<a id="amd" class="anchor" href="#amd" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>AMD</h4>

<div class="highlight highlight-source-js"><pre><span class="pl-en">define</span>([<span class="pl-s"><span class="pl-pds">'</span>memorystorage<span class="pl-pds">'</span></span>], <span class="pl-k">function</span>(<span class="pl-smi">MemoryStorage</span>){
    <span class="pl-c">// here, the MemoryStorage function is available</span>
    <span class="pl-k">var</span> myStorage <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MemoryStorage</span>(<span class="pl-s"><span class="pl-pds">'</span>my-app<span class="pl-pds">'</span></span>);
});</pre></div>

<p>To be able to load MemoryStorage from CDN as an AMD module, configure the CDN url like so (note the absence of <code>.js</code> in the url):</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">require</span>.<span class="pl-en">config</span>({
    paths<span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">'</span>memorystorage<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>https://cdn.rawgit.com/download/memorystorage/0.10.0/dist/memorystorage.min<span class="pl-pds">'</span></span>
    }
});</pre></div>

<h2>
<a id="create-a-memory-storage-object" class="anchor" href="#create-a-memory-storage-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create a memory storage object</h2>

<p>The <code>MemoryStorage</code> function creates (or returns) a storage object implementing the W3C Web Storage API.
By default, scripts share a <code>global</code> storage object, so scripts can access and mutate each other's store
object. To have MemoryStorage create a storage object that is isolated from other scripts, you pass in
a unique ID which acts as a namespace:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> isolated <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MemoryStorage</span>(<span class="pl-s"><span class="pl-pds">'</span>my-app<span class="pl-pds">'</span></span>); <span class="pl-c">// isolated from other scripts, recommended.</span></pre></div>

<p>If you don't pass in an ID, or use the ID <code>'global'</code>, you get a globally shared storage object:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> <span class="pl-c1">global</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MemoryStorage</span>(); <span class="pl-c">// will default to a globally shared storage object.</span>
<span class="pl-k">var</span> global2 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MemoryStorage</span>(<span class="pl-s"><span class="pl-pds">'</span>global<span class="pl-pds">'</span></span>); <span class="pl-c">// effectively same as above</span></pre></div>

<p>For your convenience, the constructor permits <code>new</code>-less invocation:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> store <span class="pl-k">=</span> <span class="pl-en">MemoryStorage</span>(<span class="pl-s"><span class="pl-pds">'</span>my-store<span class="pl-pds">'</span></span>);
<span class="pl-k">var</span> <span class="pl-c1">global</span> <span class="pl-k">=</span> <span class="pl-en">MemoryStorage</span>();</pre></div>

<p>Instances of <code>MemoryStorage</code> expose an immutable <code>id</code> property that is set to
the id the store was created with:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-c1">id</span>); <span class="pl-c">// alerts 'my-store'</span>
<span class="pl-en">alert</span>(<span class="pl-c1">global</span>.<span class="pl-c1">id</span>); <span class="pl-c">// alerts 'global'</span></pre></div>

<h2>
<a id="use-it" class="anchor" href="#use-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Use it</h2>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">store</span>.<span class="pl-c1">setItem</span>(<span class="pl-s"><span class="pl-pds">'</span>myString<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Hello MemoryStorage!<span class="pl-pds">'</span></span>);
<span class="pl-smi">store</span>.<span class="pl-smi">myObject</span> <span class="pl-k">=</span> <span class="pl-c1">JSON</span>.<span class="pl-en">stringify</span>({my<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>object<span class="pl-pds">'</span></span>}));
<span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-c1">getItem</span>(<span class="pl-s"><span class="pl-pds">'</span>My string<span class="pl-pds">'</span></span>)); <span class="pl-c">// alerts 'Hello MemoryStorage!'</span>
<span class="pl-en">alert</span>(store[<span class="pl-s"><span class="pl-pds">'</span>My string<span class="pl-pds">'</span></span>]); <span class="pl-c">// alerts 'Hello MemoryStorage!'</span>
<span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-c1">length</span>); <span class="pl-c">// alerts '2'</span>
<span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-c1">key</span>(<span class="pl-c1">1</span>)); <span class="pl-c">// alerts 'My object'</span>
<span class="pl-smi">store</span>.<span class="pl-c1">removeItem</span>(<span class="pl-s"><span class="pl-pds">'</span>My string<span class="pl-pds">'</span></span>);
<span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-c1">length</span>); <span class="pl-c">// alerts '1'</span>
<span class="pl-smi">store</span>.<span class="pl-c1">clear</span>();
<span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-c1">length</span>); <span class="pl-c">// alerts '0'</span></pre></div>

<h2>
<a id="staying-within-the-web-storage-api" class="anchor" href="#staying-within-the-web-storage-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Staying within the Web Storage API</h2>

<p>The Web Storage API is pretty small. For discovering which key-value pairs are available within
the storage object, you basically only have the <code>length</code> property and the <code>key(idx)</code> function.
The same applies to reading, writing and removing keys. You have the functions <code>getItem</code>, <code>setItem</code>
and <code>removeItem</code> and there is <code>clear</code> but that pretty much sums it up. </p>

<p>In practice there are many other ways to interact with storage objects, such as <code>store[myKey] = myValue</code>, 
or <code>delete store[myKey]</code> or <code>Object.keys(store)</code> etc, but please remember that when you use these 
constructs, you venture outside the interface provided by the Web Storage API and run the risk of 
incompatibility.</p>

<p>This project is committed to be as compatible as possible with the <code>localStorage</code> object present in
real-life browsers, but due to inherent limitations to the Javascript language, it's impossible to
guarantee the same behavior in all instances if you go beyond the Web Storage API.</p>

<h3>
<a id="example-of-going-outside-of-the-api" class="anchor" href="#example-of-going-outside-of-the-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example of going outside of the API</h3>

<p>Here is some code to print all the keys and values in the <code>store</code> object that does not limit itself 
to the Web Storage API:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> keys <span class="pl-k">=</span> <span class="pl-c1">Object</span>.<span class="pl-c1">keys</span>(store);
<span class="pl-k">for</span> (<span class="pl-k">var</span> i<span class="pl-k">=</span><span class="pl-c1">0</span>; i<span class="pl-k">&lt;</span><span class="pl-smi">keys</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {
    <span class="pl-k">var</span> key <span class="pl-k">=</span> <span class="pl-en">keys</span>(i);
    <span class="pl-k">var</span> value <span class="pl-k">=</span> store[key];
    <span class="pl-en">console</span>.<span class="pl-c1">info</span>(key <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> value);
}</pre></div>

<h3>
<a id="example-of-staying-within-the-api" class="anchor" href="#example-of-staying-within-the-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example of staying within the API</h3>

<p>Here is the same code, rewritten to stay within the API:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">for</span> (<span class="pl-k">var</span> i<span class="pl-k">=</span><span class="pl-c1">0</span>; i<span class="pl-k">&lt;</span><span class="pl-smi">store</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {
    <span class="pl-k">var</span> key <span class="pl-k">=</span> <span class="pl-smi">store</span>.<span class="pl-c1">key</span>(i);
    <span class="pl-k">var</span> value <span class="pl-k">=</span> <span class="pl-smi">store</span>.<span class="pl-c1">getItem</span>(key);
    <span class="pl-en">console</span>.<span class="pl-c1">info</span>(key <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> value);
}</pre></div>

<h2>
<a id="beyond-the-web-storage-api" class="anchor" href="#beyond-the-web-storage-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Beyond the Web Storage API</h2>

<p>MemoryStorage is type-agnostic; it doesn't care about the type of data you store. 
If you want to remain within the Web Storage API, you should only read and write strings, 
however if you want you can store other types just as well:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">store</span>.<span class="pl-smi">myObject</span> <span class="pl-k">=</span> {my<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>object<span class="pl-pds">'</span></span>};
<span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-smi">myObject</span>.<span class="pl-smi">my</span>); <span class="pl-c">// alerts 'object'</span>
<span class="pl-k">var</span> tree <span class="pl-k">=</span> {
    nested<span class="pl-k">:</span> {
        objects<span class="pl-k">:</span> {
            working<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Sure!<span class="pl-pds">'</span></span>
        }
    }
}
<span class="pl-smi">store</span>.<span class="pl-c1">setItem</span>(<span class="pl-s"><span class="pl-pds">'</span>tree<span class="pl-pds">'</span></span>, tree);
<span class="pl-en">alert</span>(<span class="pl-smi">store</span>.<span class="pl-smi">tree</span>.<span class="pl-smi">nested</span>.<span class="pl-smi">objects</span>.<span class="pl-smi">working</span>); <span class="pl-c">// alerts 'Sure!'</span></pre></div>

<h2>
<a id="contributors" class="anchor" href="#contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributors</h2>

<p>I'd like to draw your attention to the people that contributed to this project with bug reports,
documentation, pull requests or other forms of support.</p>

<ul>
<li>
<a href="https://github.com/semmel">Matthias Seemann</a>: <a href="https://github.com/Download/memorystorage/pull/3">Items with store API key names are considered by key() #3</a>
</li>
</ul>

<h2>
<a id="copyright" class="anchor" href="#copyright" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Copyright</h2>

<p>Copyright 2015 by Stijn de Witt. Some rights reserved.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>Licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International (CC-BY-4.0)</a> Open Source license.</p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/Download">Download</a> can be found on <a href="https://github.com/Download/memorystorage">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="https://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
